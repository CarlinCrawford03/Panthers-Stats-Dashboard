[33mcommit dc6f5596f4e940b21dd1a4f86da76f3e57afd5ac[m
Author: Carlin <ccrawf67@charlotte.edu>
Date:   Tue Sep 30 20:14:24 2025 -0400

    Initial commit: Panthers stats pipeline with OpenAI + Supabase

[1mdiff --git a/app_modal.py b/app_modal.py[m
[1mnew file mode 100644[m
[1mindex 0000000..0ad1885[m
[1m--- /dev/null[m
[1m+++ b/app_modal.py[m
[36m@@ -0,0 +1,53 @@[m
[32m+[m[32mimport shlex[m
[32m+[m[32mimport subprocess[m
[32m+[m[32mfrom pathlib import Path[m
[32m+[m[32mimport os[m
[32m+[m[32mfrom dotenv import load_dotenv[m
[32m+[m[32mimport modal[m
[32m+[m
[32m+[m[32m# Load environment variables from .env file[m
[32m+[m
[32m+[m[32mload_dotenv()[m
[32m+[m
[32m+[m[32mendpoint = os.getenv("OPENAI_ENDPOINT")[m
[32m+[m[32mapi_key = os.getenv("OPENAI_API_KEY")[m
[32m+[m[32mdeployment_name = os.getenv("OPENAI_DEPLOYMENT")[m
[32m+[m
[32m+[m[32mSUPABASE_URL = os.getenv("SUPABASE_URL")[m
[32m+[m[32mSUPABASE_KEY = os.getenv("SUPABASE_KEY")[m
[32m+[m
[32m+[m[32m# Define paths[m
[32m+[m[32mstreamlit_script_local_path = Path(__file__).parent / "app.py"[m
[32m+[m[32mstreamlit_script_remote_path = "/root/app.py"[m
[32m+[m
[32m+[m[32m# Define Modal image[m
[32m+[m[32mimage = ([m
[32m+[m[32m    modal.Image.debian_slim(python_version="3.9")[m
[32m+[m[32m    .pip_install("streamlit", "supabase", "pandas", "plotly", "python-dotenv")[m
[32m+[m[32m    .env({"FORCE_REBUILD": "true"})[m
[32m+[m[32m    .add_local_file(streamlit_script_local_path, streamlit_script_remote_path)[m
[32m+[m[32m)[m
[32m+[m
[32m+[m[32m# Define Modal app[m
[32m+[m[32mapp = modal.App(name="panthers-dashboard", image=image)[m
[32m+[m
[32m+[m[32m# Validate local Streamlit script[m
[32m+[m[32mif not streamlit_script_local_path.exists():[m
[32m+[m[32m    raise RuntimeError("Missing app.py â€” make sure it's in the same folder.")[m
[32m+[m
[32m+[m[32m# Define web server function[m
[32m+[m[32m@app.function(allow_concurrent_inputs=100)[m
[32m+[m[32m@modal.web_server(8000)[m
[32m+[m[32mdef run():[m
[32m+[m[32m    target = shlex.quote(streamlit_script_remote_path)[m
[32m+[m[32m    cmd = f"streamlit run {target} --server.port 8000 --server.enableCORS=false --server.enableXsrfProtection=false"[m
[32m+[m
[32m+[m[32m    # Build environment variables[m
[32m+[m[32m    env_vars = {}[m
[32m+[m[32m    if os.getenv("SUPABASE_KEY"):[m
[32m+[m[32m        env_vars["SUPABASE_KEY"] = os.getenv("SUPABASE_KEY")[m
[32m+[m[32m    if os.getenv("SUPABASE_URL"):[m
[32m+[m[32m        env_vars["SUPABASE_URL"] = os.getenv("SUPABASE_URL")[m
[32m+[m
[32m+[m[32m    env_vars.update(os.environ)[m
[32m+[m[32m    subprocess.Popen(cmd, shell=True, env=env_vars)[m
\ No newline at end of file[m
